{"ast":null,"code":"var _jsxFileName = \"C:\\\\kodingan\\\\smart_cv\\\\front-cv-analyzer\\\\frontend\\\\src\\\\components\\\\ProtectedRoute.jsx\";\nimport { Navigate } from \"react-router-dom\";\nimport { jwtDecode } from \"jwt-decode\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function ProtectedRoute({\n  allowedRoles,\n  children\n}) {\n  const token = localStorage.getItem(\"token\");\n  if (!token) {\n    // No token → redirect to login\n    return /*#__PURE__*/_jsxDEV(Navigate, {\n      to: \"/\",\n      replace: true\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 9,\n      columnNumber: 12\n    }, this);\n  }\n  try {\n    const payload = jwtDecode(token);\n    const userRole = payload.sub.role;\n\n    // Check if user role is allowed\n    if (!allowedRoles.includes(userRole)) {\n      return /*#__PURE__*/_jsxDEV(Navigate, {\n        to: \"/unauthorized\",\n        replace: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 18,\n        columnNumber: 14\n      }, this);\n    }\n\n    // User is authorized\n    return children;\n  } catch (err) {\n    console.error(\"Invalid token:\", err);\n    return /*#__PURE__*/_jsxDEV(Navigate, {\n      to: \"/\",\n      replace: true\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 25,\n      columnNumber: 12\n    }, this);\n  }\n}\n_c = ProtectedRoute;\nvar _c;\n$RefreshReg$(_c, \"ProtectedRoute\");","map":{"version":3,"names":["Navigate","jwtDecode","jsxDEV","_jsxDEV","ProtectedRoute","allowedRoles","children","token","localStorage","getItem","to","replace","fileName","_jsxFileName","lineNumber","columnNumber","payload","userRole","sub","role","includes","err","console","error","_c","$RefreshReg$"],"sources":["C:/kodingan/smart_cv/front-cv-analyzer/frontend/src/components/ProtectedRoute.jsx"],"sourcesContent":["import { Navigate } from \"react-router-dom\";\r\nimport { jwtDecode } from \"jwt-decode\";\r\n\r\nexport default function ProtectedRoute({ allowedRoles, children }) {\r\n  const token = localStorage.getItem(\"token\");\r\n\r\n  if (!token) {\r\n    // No token → redirect to login\r\n    return <Navigate to=\"/\" replace />;\r\n  }\r\n\r\n  try {\r\n    const payload = jwtDecode(token);\r\n    const userRole = payload.sub.role;\r\n\r\n    // Check if user role is allowed\r\n    if (!allowedRoles.includes(userRole)) {\r\n      return <Navigate to=\"/unauthorized\" replace />;\r\n    }\r\n    \r\n    // User is authorized\r\n    return children;\r\n  } catch (err) {\r\n    console.error(\"Invalid token:\", err);\r\n    return <Navigate to=\"/\" replace />;\r\n  }\r\n}\r\n"],"mappings":";AAAA,SAASA,QAAQ,QAAQ,kBAAkB;AAC3C,SAASC,SAAS,QAAQ,YAAY;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAEvC,eAAe,SAASC,cAAcA,CAAC;EAAEC,YAAY;EAAEC;AAAS,CAAC,EAAE;EACjE,MAAMC,KAAK,GAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;EAE3C,IAAI,CAACF,KAAK,EAAE;IACV;IACA,oBAAOJ,OAAA,CAACH,QAAQ;MAACU,EAAE,EAAC,GAAG;MAACC,OAAO;IAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAE,CAAC;EACpC;EAEA,IAAI;IACF,MAAMC,OAAO,GAAGf,SAAS,CAACM,KAAK,CAAC;IAChC,MAAMU,QAAQ,GAAGD,OAAO,CAACE,GAAG,CAACC,IAAI;;IAEjC;IACA,IAAI,CAACd,YAAY,CAACe,QAAQ,CAACH,QAAQ,CAAC,EAAE;MACpC,oBAAOd,OAAA,CAACH,QAAQ;QAACU,EAAE,EAAC,eAAe;QAACC,OAAO;MAAA;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAE,CAAC;IAChD;;IAEA;IACA,OAAOT,QAAQ;EACjB,CAAC,CAAC,OAAOe,GAAG,EAAE;IACZC,OAAO,CAACC,KAAK,CAAC,gBAAgB,EAAEF,GAAG,CAAC;IACpC,oBAAOlB,OAAA,CAACH,QAAQ;MAACU,EAAE,EAAC,GAAG;MAACC,OAAO;IAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAE,CAAC;EACpC;AACF;AAACS,EAAA,GAvBuBpB,cAAc;AAAA,IAAAoB,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}